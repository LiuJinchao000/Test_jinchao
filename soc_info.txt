#!/bin/bash
#修改为自己当前时间"yyyymmrr hh:mm:ss"
sudo date -s "20230921 09:30:00" 
while true; do
  cpu_usage=$(ps aux | head -1; ps aux | grep -v PID | sort -rn -k +3 | head -10)
  cpu_rate_usage=$(top -b -n 1 | grep "Cpu(s)" | awk '{print $2 + $4}')
  tmp_usage=$(sudo cat /sys/class/thermal/thermal_zone0/temp)
  npufreq_usage=$(sudo cat /sys/class/devfreq/fdab0000.npu/cur_freq)
  cpu6freq_usage=$(sudo cat /sys/devices/system/cpu/cpufreq/policy6/cpuinfo_cur_freq)
  mem_usage=$(sudo free -m )
  time_usage=$(sudo date )
  
  echo "CPU使用最多的10个线程:\n $cpu_usage%"
  echo "cpu内存使用率:$cpu_rate_usage%"
  echo "内存使用率: \n $mem_usage%"
  echo "温度: $tmp_usage%"
  echo "npu主频: $npufreq_usage%"
  echo "cpu6主频: $cpu6freq_usage%"

  echo "时间: $time_usage%"
  sleep 60
done

